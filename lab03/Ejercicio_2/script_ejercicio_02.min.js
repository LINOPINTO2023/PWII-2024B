let historyStack=[];function crearCalculadora(){const e=document.querySelector(".calculator");const t=document.createElement("input");t.setAttribute("type","text");t.setAttribute("id","display");t.disabled=true;e.appendChild(t);const c=document.createElement("div");c.className="buttons";const a=[{text:"",onclick:()=>clearDisplay(),svg:"./svg/iconmonstr-backspace-lined.svg"},{text:"(",onclick:()=>appendValue("(")},{text:")",onclick:()=>appendValue(")")},{text:"mod",onclick:()=>appendValue("%")},{text:"+/-",onclick:()=>toggleSign()},{text:"1",onclick:()=>appendValue("1")},{text:"2",onclick:()=>appendValue("2")},{text:"3",onclick:()=>appendValue("3")},{text:"/",onclick:()=>appendValue("/")},{text:"√",onclick:()=>calculateSqrt()},{text:"4",onclick:()=>appendValue("4")},{text:"5",onclick:()=>appendValue("5")},{text:"6",onclick:()=>appendValue("6")},{text:"*",onclick:()=>appendValue("*")},{text:"x²",onclick:()=>appendValue("^2")},{text:"7",onclick:()=>appendValue("7")},{text:"8",onclick:()=>appendValue("8")},{text:"9",onclick:()=>appendValue("9")},{text:"-",onclick:()=>appendValue("-")},{text:"=",onclick:()=>calculate(),className:"result"},{text:"0",onclick:()=>appendValue("0")},{text:",",onclick:()=>appendValue(".")},{text:"%",onclick:()=>calculatePercentage()},{text:"+",onclick:()=>appendValue("+")}];a.forEach(e=>{const t=document.createElement("button");if(e.svg){const a=document.createElement("img");a.src=e.svg;a.alt="Backspace";a.style.width="24px";a.style.height="24px";t.appendChild(a)}else{t.textContent=e.text}t.onclick=e.onclick;t.className=e.className!=undefined?e.className:"button";c.appendChild(t)});e.appendChild(c)}crearCalculadora();function appendValue(e){const t=document.getElementById("display");t.value+=e}function clearDisplay(){const e=document.getElementById("display");e.value=""}function calculate(){const display=document.getElementById("display");try{let expression=display.value.replace(/x²/g,"**2").replace(/\^/g,"**");const result=eval(expression);addToHistory(display.value+" = "+result);display.value=result}catch(error){display.value="Error"}}function toggleSign(){const t=document.getElementById("display");try{const e=parseFloat(t.value);if(!isNaN(e)){const a=e*-1;t.value=a}}catch(e){t.value="Error"}}function calculatePercentage(){const t=document.getElementById("display");try{const e=parseFloat(t.value);if(!isNaN(e)){const a=e/100;addToHistory(t.value+"% = "+a);t.value=a}}catch(e){t.value="Error"}}function calculateSqrt(){const t=document.getElementById("display");try{const e=parseFloat(t.value);if(e>=0){const a=Math.sqrt(e);addToHistory("√("+t.value+") = "+a);t.value=a}else{t.value="Error"}}catch(e){t.value="Error"}}function addToHistory(e){historyStack.push(e);updateHistoryDisplay()}function updateHistoryDisplay(){const a=document.getElementById("historyList");a.innerHTML="";historyStack.forEach(e=>{const t=document.createElement("li");t.textContent=e;a.appendChild(t)})}
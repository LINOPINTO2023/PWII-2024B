let elemento=document.querySelector('input[type="text"]'),ActualVariable="",historialElement=document.getElementById("historial"),historial=[];function ActualizarVariable(e){ActualVariable+=e,elemento.value=ActualVariable}function calculate(){try{let resultHistorial=ActualVariable,result=ActualVariable.replace("÷","/").replace("x","*").replace("mod","%").replace("π",Math.PI).replace("√","Math.sqrt(").replace("^2","**2").replace("E","*Math.E");result.includes("Math.sqrt(")&&(result+=")"),elemento.value=eval(result),ActualVariable=elemento.value,historial.push(resultHistorial+" = "+ActualVariable),3<historial.length&&historial.shift(),historialElement.innerHTML=historial.join("<br>")}catch(error){display.value="Error",ActualVariable=""}}function deleteLast(){ActualVariable=ActualVariable.slice(0,-1),elemento.value=ActualVariable||"0"}function clearAll(){ActualVariable="",elemento.value="0"}document.querySelectorAll("button").forEach(l=>{l.addEventListener("click",()=>{var e=l.textContent.trim();"="===e?calculate():"⌫"===e?deleteLast():"Deshacer"===e?clearAll():"x²"===e?(ActualVariable+="^2",elemento.value=ActualVariable):"%"===e?(ActualVariable/=100,elemento.value=ActualVariable):ActualizarVariable(e)})});